(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{295:function(e,t,a){Promise.resolve().then(a.bind(a,143))},143:function(e,t,a){"use strict";a.r(t);var s=a(7437),r=a(2265),n=a(5251),o=a(2442),c=a(2894),i=a(2549),l=a(7972),d=a(5589),m=a(1295),u=a(9036),p=a(519),h=a(6245),g=a(774),x=a(7216),y=a(9670),f=a(7948),b=a(2870);t.default=()=>{let[e,t]=(0,r.useState)(null),[a,w]=(0,r.useState)(!0),[j,N]=(0,r.useState)(!1),[v,D]=(0,r.useState)(null),[P,S]=(0,r.useState)(""),[C,T]=(0,r.useState)(""),[E,A]=(0,r.useState)(""),[k,I]=(0,r.useState)(""),[O,U]=(0,r.useState)(""),[Z,F]=(0,r.useState)(!1),[q,B]=(0,r.useState)(!1),[z,R]=(0,r.useState)(!1),[J,W]=(0,r.useState)("profile");(0,r.useEffect)(()=>{L()},[]);let L=async()=>{try{if(!localStorage.getItem("adminToken")){window.location.href="/admin";return}let e=await b.adminAPI.getProfile();t(e),S(e.name),T(e.email)}catch(s){var e,a;console.error("Failed to fetch profile:",s);let t=s.message||"Failed to load profile information";D({type:"error",text:t}),f.toast.error(t),((null===(e=s.message)||void 0===e?void 0:e.includes("401"))||(null===(a=s.message)||void 0===a?void 0:a.includes("Unauthorized")))&&(localStorage.removeItem("adminToken"),window.location.href="/admin")}finally{w(!1)}},_=async e=>{if(e.preventDefault(),N(!0),D(null),!P.trim()){let e="Name is required";D({type:"error",text:e}),f.toast.error(e),N(!1);return}if(!C.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C)){let e="Please enter a valid email address";D({type:"error",text:e}),f.toast.error(e),N(!1);return}try{let e=await b.adminAPI.updateProfile(P.trim(),C.trim());t(e.admin);let a="Profile updated successfully!";D({type:"success",text:a}),f.toast.success(a)}catch(t){console.error("Update failed:",t);let e=t.message||"Failed to update profile";D({type:"error",text:e}),f.toast.error(e)}finally{N(!1)}},H=async e=>{if(e.preventDefault(),N(!0),D(null),!E.trim()){let e="Current password is required";D({type:"error",text:e}),f.toast.error(e),N(!1);return}if(!k.trim()){let e="New password is required";D({type:"error",text:e}),f.toast.error(e),N(!1);return}if(k.length<6){let e="New password must be at least 6 characters long";D({type:"error",text:e}),f.toast.error(e),N(!1);return}if(k!==O){let e="New passwords do not match";D({type:"error",text:e}),f.toast.error(e),N(!1);return}if(E===k){let e="New password must be different from current password";D({type:"error",text:e}),f.toast.error(e),N(!1);return}try{await b.adminAPI.changePassword(E,k);let e="Password changed successfully!";D({type:"success",text:e}),f.toast.success(e),A(""),I(""),U("")}catch(t){console.error("Password change failed:",t);let e=t.message||"Failed to change password";D({type:"error",text:e}),f.toast.error(e)}finally{N(!1)}};return a?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage your account information and security settings"})]}),v&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 rounded-lg flex items-center space-x-2 ".concat("success"===v.type?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"),children:["success"===v.type?(0,s.jsx)(o.Z,{className:"w-5 h-5"}):(0,s.jsx)(c.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:v.text}),(0,s.jsx)("button",{onClick:()=>D(null),className:"ml-auto text-gray-400 hover:text-gray-600",children:(0,s.jsx)(i.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,s.jsx)("button",{onClick:()=>W("profile"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("profile"===J?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Profile Information"})]})}),(0,s.jsx)("button",{onClick:()=>W("password"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("password"===J?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Change Password"})]})})]})}),(0,s.jsxs)("div",{className:"p-6",children:["profile"===J&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Profile Information"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Update your account's profile information and email address."})]}),(0,s.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",id:"name",value:P,onChange:e=>S(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"email",id:"email",value:C,onChange:e=>T(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter your email address"})]})]})]}),e&&(0,s.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(u.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["Role: ",(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.role})]})]})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:j,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{children:"Saving..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Save Changes"})]})})})]})]}),"password"===J&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Change Password"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Ensure your account is using a long, random password to stay secure."})]}),(0,s.jsxs)("form",{onSubmit:H,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:Z?"text":"password",id:"currentPassword",value:E,onChange:e=>A(e.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter current password"}),(0,s.jsx)("button",{type:"button",onClick:()=>F(!Z),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:Z?(0,s.jsx)(x.Z,{className:"w-5 h-5"}):(0,s.jsx)(y.Z,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:q?"text":"password",id:"newPassword",value:k,onChange:e=>I(e.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter new password"}),(0,s.jsx)("button",{type:"button",onClick:()=>B(!q),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:q?(0,s.jsx)(x.Z,{className:"w-5 h-5"}):(0,s.jsx)(y.Z,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:z?"text":"password",id:"confirmPassword",value:O,onChange:e=>U(e.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Confirm new password"}),(0,s.jsx)("button",{type:"button",onClick:()=>R(!z),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:z?(0,s.jsx)(x.Z,{className:"w-5 h-5"}):(0,s.jsx)(y.Z,{className:"w-5 h-5"})})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(c.Z,{className:"h-5 w-5 text-blue-400"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Password Requirements"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,s.jsx)("li",{children:"At least 6 characters long"}),(0,s.jsx)("li",{children:"Include a mix of letters, numbers, and symbols"}),(0,s.jsx)("li",{children:"Different from your current password"})]})})]})]})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",disabled:j,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{children:"Changing Password..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Change Password"})]})})})]})]})]})]})]})}},2870:function(e,t,a){"use strict";a.d(t,{CT:function(){return s},Jn:function(){return r},adminAPI:function(){return i},applicationsAPI:function(){return c},contentAPI:function(){return l}});let s="http://localhost:5000",r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";if(e.startsWith("http")){if(e.includes("cloudinary.com")){let a=e.includes("?")?"&":"?",s=t?Date.now():Math.floor(Date.now()/6e4);return"".concat(e).concat(a,"v=").concat(s)}return e}return"".concat(s).concat(e.startsWith("/")?e:"/".concat(e))},n=()=>{let e=localStorage.getItem("adminToken");return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}},o=async e=>{if(!e.ok){let t="HTTP ".concat(e.status);try{let a=await e.json();t=a.error||a.message||t}catch(a){switch(e.status){case 400:t="Invalid request data";break;case 401:t="Authentication required";break;case 403:t="Access forbidden";break;case 404:t="API endpoint not found";break;case 500:t="Server error occurred";break;default:t="Network error occurred"}}throw Error(t)}return e.json()},c={submit:async e=>o(await fetch("".concat(s,"/api/applications"),{method:"POST",mode:"cors",body:e})),getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return o(await fetch("".concat(s,"/api/applications").concat(t?"?".concat(t):""),{headers:{"Content-Type":"application/json"}}))},getStatusByEmail:async e=>o(await fetch("".concat(s,"/api/applications/status/").concat(encodeURIComponent(e)))),getStatistics:async()=>o(await fetch("".concat(s,"/api/applications/statistics"),{headers:{"Content-Type":"application/json"}})),updateStatus:async(e,t,a)=>o(await fetch("".concat(s,"/api/applications/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t,notes:a})}))},i={login:async(e,t)=>o(await fetch("".concat(s,"/api/admin/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})})),getProfile:async()=>o(await fetch("".concat(s,"/api/admin/profile"),{headers:n()})),updateProfile:async(e,t)=>o(await fetch("".concat(s,"/api/admin/profile"),{method:"PUT",headers:n(),body:JSON.stringify({name:e,email:t})})),changePassword:async(e,t)=>o(await fetch("".concat(s,"/api/admin/change-password"),{method:"PUT",headers:n(),body:JSON.stringify({currentPassword:e,newPassword:t})}))},l={heroSlides:{getAll:async()=>o(await fetch("".concat(s,"/api/content/hero-slides"))),getAllAdmin:async()=>o(await fetch("".concat(s,"/api/content/admin/hero-slides"),{headers:n()})),create:async e=>{let t=localStorage.getItem("adminToken");return o(await fetch("".concat(s,"/api/content/admin/hero-slides"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e}))},createWithUrl:async e=>{let t="".concat(s,"/api/content/admin/hero-slides-url"),a=n();console.log("\uD83C\uDF10 API Call: POST",t),console.log("\uD83D\uDCCB Headers:",a),console.log("\uD83D\uDCE4 Data:",e);let r=await fetch(t,{method:"POST",headers:a,body:JSON.stringify(e)});return console.log("\uD83D\uDCE5 Response status:",r.status),console.log("\uD83D\uDCE5 Response headers:",Object.fromEntries(r.headers.entries())),o(r)},update:async(e,t)=>{let a=localStorage.getItem("adminToken");return o(await fetch("".concat(s,"/api/content/admin/hero-slides/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:t}))},updateWithUrl:async(e,t)=>{let a="".concat(s,"/api/content/admin/hero-slides-url/").concat(e),r=n();console.log("\uD83C\uDF10 API Call: PUT",a),console.log("\uD83D\uDCCB Headers:",r),console.log("\uD83D\uDCE4 Data:",t);let c=await fetch(a,{method:"PUT",headers:r,body:JSON.stringify(t)});return console.log("\uD83D\uDCE5 Response status:",c.status),console.log("\uD83D\uDCE5 Response headers:",Object.fromEntries(c.headers.entries())),o(c)},delete:async e=>o(await fetch("".concat(s,"/api/content/admin/hero-slides/").concat(e),{method:"DELETE",headers:n()}))},teachers:{getAll:async()=>o(await fetch("".concat(s,"/api/content/teachers"))),getAllAdmin:async()=>o(await fetch("".concat(s,"/api/content/admin/teachers"),{headers:n()})),create:async e=>{let t=localStorage.getItem("adminToken");return o(await fetch("".concat(s,"/api/content/admin/teachers"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e}))},createWithData:async e=>{let t=new FormData;t.append("name",e.name),t.append("position",e.position),t.append("expertise",e.expertise),t.append("description",e.description),t.append("rating",e.rating.toString()),t.append("order",e.order.toString()),t.append("isActive",e.isActive.toString()),e.imageUrl&&t.append("imageUrl",e.imageUrl),e.email&&t.append("email",e.email),e.phone&&t.append("phone",e.phone),e.department&&t.append("department",e.department),e.qualifications&&t.append("qualifications",e.qualifications),e.experience&&t.append("experience",e.experience);let a=localStorage.getItem("adminToken");return o(await fetch("".concat(s,"/api/content/admin/teachers"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:t}))},updateWithData:async(e,t)=>o(await fetch("".concat(s,"/api/content/admin/teachers/").concat(e),{method:"PUT",headers:n(),body:JSON.stringify(t)})),updateWithUrl:async(e,t)=>{let a="".concat(s,"/api/content/admin/teachers-url/").concat(e),r=n();console.log("\uD83C\uDF10 API Call: PUT",a),console.log("\uD83D\uDCCB Headers:",r),console.log("\uD83D\uDCE4 Data:",t);let c=await fetch(a,{method:"PUT",headers:r,body:JSON.stringify(t)});return console.log("\uD83D\uDCE5 Response status:",c.status),console.log("\uD83D\uDCE5 Response headers:",Object.fromEntries(c.headers.entries())),o(c)},delete:async e=>o(await fetch("".concat(s,"/api/content/admin/teachers/").concat(e),{method:"DELETE",headers:n()}))},students:{getAll:async e=>{let t=e&&"all"!==e?"".concat(s,"/api/content/students?year=").concat(e):"".concat(s,"/api/content/students");return o(await fetch(t))},getYears:async()=>o(await fetch("".concat(s,"/api/content/students/years"))),getAllAdmin:async()=>o(await fetch("".concat(s,"/api/content/admin/students"),{headers:n()})),create:async e=>{let t=localStorage.getItem("adminToken");return o(await fetch("".concat(s,"/api/content/admin/students"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e}))},update:async(e,t)=>{let a=localStorage.getItem("adminToken");return o(await fetch("".concat(s,"/api/content/admin/students/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a)},body:t}))},delete:async e=>o(await fetch("".concat(s,"/api/content/admin/students/").concat(e),{method:"DELETE",headers:n()}))},uploadImage:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hims-college/hero-slides",a=new FormData;a.append("image",e),a.append("folder",t);let r=localStorage.getItem("adminToken");console.log("\uD83D\uDCE4 Uploading image to backend...");let n=await fetch("".concat(s,"/api/content/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:a});return console.log("\uD83D\uDCE5 Upload response status:",n.status),o(n)},uploadImageDirect:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hims-college/hero-slides",a=new FormData;a.append("image",e),a.append("folder",t);let r=localStorage.getItem("adminToken");console.log("\uD83D\uDCE4 Uploading image directly (no compression)...");let n=await fetch("".concat(s,"/api/content/upload-image-direct"),{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:a});return console.log("\uD83D\uDCE5 Direct upload response status:",n.status),o(n)},uploadImageLegacy:async e=>{let t=new FormData;t.append("image",e);let a=localStorage.getItem("adminToken");return o(await fetch("".concat(s,"/api/content/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:t}))}}}},function(e){e.O(0,[581,610,971,938,744],function(){return e(e.s=295)}),_N_E=e.O()}]);