(()=>{var e={};e.id=316,e.ids=[316],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},6202:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>r.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>g,tree:()=>o});var a=t(482),l=t(9108),i=t(2563),r=t.n(i),n=t(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["admin",{children:["hero-slides",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8259)),"E:\\my project\\my project\\hims website\\hims frontend\\app\\admin\\hero-slides\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6294)),"E:\\my project\\my project\\hims website\\hims frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3067)),"E:\\my project\\my project\\hims website\\hims frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\my project\\my project\\hims website\\hims frontend\\app\\admin\\hero-slides\\page.tsx"],m="/admin/hero-slides/page",u={require:t,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/hero-slides/page",pathname:"/admin/hero-slides",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2771:(e,s,t)=>{Promise.resolve().then(t.bind(t,5502))},5502:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(5344),l=t(3729),i=t(7916),r=t(1838),n=t(3148),d=t(1222),o=t(5695),c=t(8271),m=t(4513),u=t(3380),g=t(1498),x=t(9356);let h=()=>{let[e,s]=(0,l.useState)([]),[h,p]=(0,l.useState)(!0),[b,f]=(0,l.useState)(!1),[y,j]=(0,l.useState)(null),[v,w]=(0,l.useState)(!1),[N,E]=(0,l.useState)(0),[C,D]=(0,l.useState)(!1),[P,k]=(0,l.useState)(!1),[S,U]=(0,l.useState)(null);(0,l.useEffect)(()=>{A()},[]);let A=async()=>{try{let{contentAPI:e}=await Promise.resolve().then(t.bind(t,9356)),a=(await e.heroSlides.getAllAdmin()).map(e=>({...e,id:e._id||e.id||"unknown",_id:e._id||e.id||"unknown"}));s(a)}catch(e){console.error("Failed to fetch hero slides:",e)}finally{p(!1)}},_=async e=>{e.preventDefault();let s=e.target,a=new FormData(s);w(!1),E(0),D(!1);try{let e=a.get("title"),s=a.get("subtitle"),l=a.get("description"),i=parseInt(a.get("order"))||0,r="true"===a.get("isActive"),n=a.get("image");if(!e||!s||!l){alert("Please fill in all required fields (Title, Subtitle, Description)");return}if(!y&&(!n||0===n.size)){alert("Please select an image for the hero slide");return}let d={title:e,subtitle:s,description:l,order:i,isActive:r,imageUrl:y?.imageUrl||""};if(n&&n.size>0){w(!0),E(10),console.log("\uD83D\uDCE4 Step 1: Uploading image to backend..."),console.log("\uD83D\uDCCF File size:",Math.round(n.size/1024/1024*100)/100,"MB");try{let{contentAPI:e}=await Promise.resolve().then(t.bind(t,9356));n.size>10485760&&(E(20),console.log("\uD83D\uDCE6 Large file detected, compression in progress..."));let s=await e.uploadImage(n,"hims-college/hero-slides");d.imageUrl=s.imageUrl,console.log("✅ Image uploaded successfully:",s.imageUrl),E(100)}catch(e){if(console.error("❌ Image upload failed:",e),e.message&&e.message.includes("413"))alert(`Image file is too large (${Math.round(n.size/1024/1024)}MB). Please try a smaller image (under 100MB).`);else if(e.message&&e.message.includes("IDAT stream error")||e.message&&e.message.includes("pngload_buffer")){if(confirm("PNG processing failed. This can happen with certain PNG files. Would you like to try uploading without compression? (This may result in a larger file size)"))try{console.log("\uD83D\uDD04 Attempting direct upload without compression..."),E(30);let{contentAPI:e}=await Promise.resolve().then(t.bind(t,9356)),s=await e.uploadImageDirect(n,"hims-college/hero-slides");d.imageUrl=s.imageUrl,console.log("✅ Direct upload successful:",s.imageUrl),E(100)}catch(e){console.error("❌ Direct upload also failed:",e),alert(`Direct upload failed: ${e.message}

Please try:
1. Converting the image to JPEG format
2. Using a smaller image
3. Contacting support if the issue persists`)}else alert("Upload cancelled. Please try converting the image to JPEG format or use a different image.")}else e.message&&e.message.includes("compression")?alert("Failed to process image. Please try a different image format (JPEG recommended)."):alert(`Image upload failed: ${e.message}`);return}finally{w(!1)}}D(!0),console.log("\uD83D\uDCBE Step 2: Saving hero slide to backend..."),console.log("\uD83D\uDCE4 Sending slide data:",d);let{contentAPI:o}=await Promise.resolve().then(t.bind(t,9356));if(y){console.log(`🟡 Updating hero slide ${y.id}`);let e=await o.heroSlides.updateWithUrl(y.id,d);console.log("✅ Hero slide updated successfully:",e)}else{console.log("\uD83D\uDFE2 Creating new hero slide");let e=await o.heroSlides.createWithUrl(d);console.log("✅ Hero slide created successfully:",e)}await A(),f(!1),j(null)}catch(e){console.error("❌ Save failed:",e),alert(e.message||"Failed to save hero slide")}finally{w(!1),D(!1),E(0)}},F=async e=>{if(confirm("Are you sure you want to delete this hero slide?"))try{let{contentAPI:s}=await Promise.resolve().then(t.bind(t,9356));await s.heroSlides.delete(e),A()}catch(e){console.error("Delete failed:",e),alert("Delete failed")}},I=async(e,s)=>{try{let a=new FormData;a.append("isActive",(!s).toString());let{contentAPI:l}=await Promise.resolve().then(t.bind(t,9356));await l.heroSlides.update(e,a),A()}catch(e){console.error("Toggle failed:",e)}},q=async()=>{k(!0),U(null);try{console.log("\uD83E\uDDEA Testing backend image upload...");let e=new Blob([new Uint8Array([137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,0,1,0,0,0,1,8,2,0,0,0,144,119,83,222,0,0,0,12,73,68,65,84,8,153,1,1,0,0,0,255,255,0,0,0,2,0,1,226,33,188,51,0,0,0,0,73,69,78,68,174,66,96,130])],{type:"image/png"}),s=new File([e],"backend-test.png",{type:"image/png"}),{contentAPI:a}=await Promise.resolve().then(t.bind(t,9356)),l=await a.uploadImage(s,"hims-college/test");console.log("✅ Backend upload test successful:",l),U(`✅ Image upload working! URL: ${l.imageUrl.substring(0,50)}...`)}catch(e){console.error("❌ Backend upload test error:",e),U(`❌ Upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}finally{k(!1)}};return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hero Slides"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:q,disabled:P,className:"px-3 py-2 text-sm bg-green-100 text-green-700 rounded-md hover:bg-green-200 disabled:opacity-50 flex items-center space-x-2",children:P?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}),a.jsx("span",{children:"Testing..."})]}):null}),(0,a.jsxs)("button",{onClick:()=>{j(null),f(!0)},className:"btn-primary flex items-center space-x-2",children:[a.jsx(r.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Add New Slide"})]})]})]}),S&&(0,a.jsxs)("div",{className:`mb-4 p-3 rounded-md ${S.startsWith("✅")?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[a.jsx("strong",{children:"Backend Upload Test:"})," ",S]}),a.jsx("div",{className:"grid gap-6",children:e.map(e=>a.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("img",{src:(()=>{let s=(0,x.Jn)(e.imageUrl);return console.log("Admin hero slide image URL:",s,"for slide:",e.title),s})(),alt:e.title,className:"w-32 h-20 object-cover rounded",onError:e=>{let s=e.target;console.log("Admin hero slide image failed to load:",s.src),s.src='data:image/svg+xml,%3Csvg width="128" height="80" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="128" height="80" fill="%233B82F6"/%3E%3Ctext x="64" y="40" text-anchor="middle" fill="white" font-size="10"%3ESLIDE%3C/text%3E%3C/svg%3E'},onLoad:()=>{console.log("Admin hero slide image loaded successfully")}}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),a.jsx("p",{className:"text-sm text-gray-600",children:e.subtitle}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description}),a.jsx("div",{className:"flex items-center space-x-4 mt-2",children:(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Order: ",e.order]})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>I(e.id,e.isActive),className:`p-2 rounded ${e.isActive?"text-green-600":"text-gray-400"}`,title:e.isActive?"Active":"Inactive",children:e.isActive?a.jsx(n.Z,{className:"w-4 h-4"}):a.jsx(d.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{j(e),f(!0)},className:"p-2 text-blue-600 hover:text-blue-800",title:"Edit",children:a.jsx(o.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>F(e.id),className:"p-2 text-red-600 hover:text-red-800",title:"Delete",children:a.jsx(c.Z,{className:"w-4 h-4"})})]})]})},e.id))}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:[y?"Edit":"Add"," Hero Slide"]}),a.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(m.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:_,children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),a.jsx("input",{name:"title",defaultValue:y?.title,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,disabled:v||C})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtitle"}),a.jsx("input",{name:"subtitle",defaultValue:y?.subtitle,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,disabled:v||C})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{name:"description",defaultValue:y?.description,className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,required:!0,disabled:v||C})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order"}),a.jsx("input",{name:"order",type:"number",defaultValue:y?.order||0,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:v||C})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{name:"isActive",defaultValue:y?.isActive!==!1?"true":"false",className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:v||C,children:[a.jsx("option",{value:"true",children:"Active"}),a.jsx("option",{value:"false",children:"Inactive"})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Image ",!y&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{name:"image",type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:v||C}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted formats: JPEG, PNG, GIF, WebP. Max 50MB. Images are automatically compressed for optimal performance."}),v&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(u.Z,{className:"w-4 h-4 text-blue-600 animate-pulse"}),a.jsx("span",{className:"text-sm text-blue-600",children:"Uploading to Cloudinary..."}),(0,a.jsxs)("span",{className:"text-sm text-blue-600 font-medium",children:[N,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${N}%`}})})]}),y?.imageUrl&&(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current image:"}),a.jsx("img",{src:(0,x.Jn)(y.imageUrl)||'data:image/svg+xml,%3Csvg width="128" height="80" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="128" height="80" fill="%233B82F6"/%3E%3Ctext x="64" y="40" text-anchor="middle" fill="white" font-size="10"%3ECURRENT%3C/text%3E%3C/svg%3E',alt:"Current",className:"w-32 h-20 object-cover rounded border",onError:e=>{e.target.src='data:image/svg+xml,%3Csvg width="128" height="80" xmlns="http://www.w3.org/2000/svg"%3E%3Crect width="128" height="80" fill="%233B82F6"/%3E%3Ctext x="64" y="40" text-anchor="middle" fill="white" font-size="10"%3ECURRENT%3C/text%3E%3C/svg%3E'}})]})]}),C&&(0,a.jsxs)("div",{className:"mb-4 flex items-center space-x-2 text-green-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}),a.jsx("span",{className:"text-sm",children:"Saving hero slide to backend..."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50",disabled:v||C,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:v||C,children:v||C?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:v?"Uploading...":"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(g.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Save"})]})})]})]})]})})]})}},3380:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},8259:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>r});let a=(0,t(6843).createProxy)(String.raw`E:\my project\my project\hims website\hims frontend\app\admin\hero-slides\page.tsx`),{__esModule:l,$$typeof:i}=a,r=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[429,69,762,85],()=>t(6202));module.exports=a})();