(()=>{var e={};e.id=375,e.ids=[375],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},4416:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=t(482),r=t(9108),l=t(2563),i=t.n(l),n=t(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["admin",{children:["teachers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3083)),"E:\\my project\\my project\\hims website\\hims frontend\\app\\admin\\teachers\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,6294)),"E:\\my project\\my project\\hims website\\hims frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3067)),"E:\\my project\\my project\\hims website\\hims frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\my project\\my project\\hims website\\hims frontend\\app\\admin\\teachers\\page.tsx"],m="/admin/teachers/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/teachers/page",pathname:"/admin/teachers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1463:(e,s,t)=>{Promise.resolve().then(t.bind(t,3453))},3453:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(5344),r=t(3729),l=t(7916),i=t(3733),n=t(1838),o=t(6755),c=t(3148),d=t(1222),m=t(5695),x=t(8271),h=t(4513),p=t(1498),u=t(9697),g=t(9356);let b=()=>{let[e,s]=(0,r.useState)([]),[b,y]=(0,r.useState)(!0),[f,j]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),[w,D]=(0,r.useState)(!1),[k,P]=(0,r.useState)(null),[A,C]=(0,r.useState)(""),[E,_]=(0,r.useState)(0);(0,r.useEffect)(()=>{q()},[]);let q=async()=>{try{y(!0);let{contentAPI:e}=await Promise.resolve().then(t.bind(t,9356)),a=Date.now();console.log("\uD83D\uDD04 Fetching teachers with cache busting:",a);let r=await e.teachers.getAllAdmin();console.log("\uD83D\uDCE5 Fetched teachers data:",r);let l=r.map(e=>({...e,id:e._id||e.id||"unknown",_id:e._id||e.id||"unknown"}));console.log("\uD83D\uDD04 Mapped teachers data:",l),s(l),_(e=>e+1)}catch(e){console.error("Failed to fetch teachers:",e),u.toast.error("Failed to fetch teachers. Please try refreshing the page.")}finally{y(!1)}},T=()=>{P(null),C(""),D(!1)},S=async e=>{e.preventDefault();let s=new FormData(e.target);try{D(!0);let e=v?.imageUrl||"";if(k)try{let{contentAPI:s}=await Promise.resolve().then(t.bind(t,9356));e=(await s.uploadImage(k,"hims-college/teachers")).imageUrl,console.log("✅ Teacher image uploaded to backend:",e)}catch(e){throw console.error("Image upload failed:",e),Error("Image upload failed. Please try again.")}let a={name:s.get("name"),position:s.get("position"),expertise:s.get("expertise"),description:s.get("description"),rating:parseFloat(s.get("rating"))||5,order:parseInt(s.get("order"))||1,isActive:!0,imageUrl:e||void 0};console.log("\uD83D\uDCE4 Sending teacher data to API:",a),console.log("\uD83D\uDDBC️ Image URL being sent:",e);let{contentAPI:r}=await Promise.resolve().then(t.bind(t,9356));v?(await r.teachers.updateWithData(v.id,a),u.toast.success("Teacher updated successfully!")):(await r.teachers.createWithData(a),u.toast.success("Teacher created successfully!")),_(e=>e+1),setTimeout(async()=>{try{await q(),localStorage.setItem("teachersUpdated",Date.now().toString()),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})})}catch(e){console.error("Error refreshing teachers:",e),window.location.reload()}},500),j(!1),N(null),T()}catch(e){console.error("Save failed:",e),u.toast.error(e.message||"Save failed")}finally{D(!1)}},U=async e=>{u.toast.warn((0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[a.jsx("p",{children:"Are you sure you want to delete this teacher?"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{u.toast.dismiss(),$(e)},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"}),a.jsx("button",{onClick:()=>{u.toast.dismiss()},className:"px-3 py-1 bg-gray-300 text-gray-700 rounded text-sm hover:bg-gray-400",children:"Cancel"})]})]}),{position:"top-center",autoClose:!1,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!0,draggable:!1})},$=async e=>{try{let{contentAPI:s}=await Promise.resolve().then(t.bind(t,9356));await s.teachers.delete(e),u.toast.success("Teacher deleted successfully!"),q()}catch(e){console.error("Delete failed:",e),u.toast.error("Delete failed")}},M=async(e,s)=>{try{let{contentAPI:a}=await Promise.resolve().then(t.bind(t,9356));await a.teachers.updateWithData(e,{isActive:!s}),u.toast.success(`Teacher ${s?"deactivated":"activated"} successfully!`),q()}catch(e){console.error("Toggle failed:",e),u.toast.error("Failed to update teacher status")}};return b?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Teachers Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your faculty members and their profiles"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>{_(e=>e+1),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})}),setTimeout(()=>{window.location.reload()},500)},className:"btn-secondary flex items-center space-x-2 px-4 py-3 rounded-lg shadow-sm hover:shadow-md transition-all",children:[a.jsx(i.Z,{className:"w-4 h-4"}),a.jsx("span",{children:"Force Refresh"})]}),(0,a.jsxs)("button",{onClick:()=>{N(null),j(!0)},className:"btn-primary flex items-center space-x-2 px-6 py-3 rounded-lg shadow-sm hover:shadow-md transition-all",children:[a.jsx(n.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"Add New Teacher"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-100",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary-600",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Teachers"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.isActive).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Active Teachers"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(e.reduce((e,s)=>e+s.rating,0)/e.length||0).toFixed(1)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Average Rating"})]})]})]}),a.jsx("div",{className:"grid gap-6",children:e.map(e=>a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("div",{className:"relative",children:[e.imageUrl?a.jsx("img",{src:(0,g.Jn)(e.imageUrl,!0),alt:e.name,className:"w-24 h-24 object-cover rounded-full shadow-md"},`${e.id}-${e.imageUrl}-${E}-${Date.now()}`):a.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full shadow-md flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500 text-lg font-semibold",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})}),a.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-white ${e.isActive?"bg-green-500":"bg-gray-400"}`})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[a.jsx(o.Z,{className:"w-4 h-4 text-yellow-500 fill-current"}),a.jsx("span",{className:"text-sm font-semibold text-gray-600",children:e.rating})]})]}),a.jsx("p",{className:"text-lg text-primary-600 font-semibold mb-1",children:e.position}),a.jsx("p",{className:"text-gray-600 mb-2",children:e.expertise}),a.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:["Order: ",e.order]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:e.isActive?"Active":"Inactive"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>M(e.id,e.isActive),className:`p-3 rounded-lg transition-colors ${e.isActive?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"}`,title:e.isActive?"Deactivate":"Activate",children:e.isActive?a.jsx(c.Z,{className:"w-5 h-5"}):a.jsx(d.Z,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{N(e),j(!0)},className:"p-3 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:a.jsx(m.Z,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>U(e.id),className:"p-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(x.Z,{className:"w-5 h-5"})})]})]})},e.id))}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-gray-900",children:[v?"Edit":"Add"," Teacher"]}),a.jsx("button",{onClick:()=>j(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(h.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:S,className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{name:"name",defaultValue:v?.name,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Enter teacher's full name",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Position"}),a.jsx("input",{name:"position",defaultValue:v?.position,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"e.g., Professor, Lecturer",required:!0})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expertise/Department"}),a.jsx("input",{name:"expertise",defaultValue:v?.expertise,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"e.g., Computer Science",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Rating (1-5)"}),a.jsx("input",{name:"rating",type:"number",step:"0.1",min:"1",max:"5",defaultValue:v?.rating||5,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",required:!0})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{name:"description",defaultValue:v?.description,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Enter a brief description about the teacher's background, experience, or achievements",rows:4,required:!0})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Display Order"}),a.jsx("input",{name:"order",type:"number",min:"1",defaultValue:v?.order||1,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Enter display order (1, 2, 3...)",required:!0}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers will appear first in the list"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Profile Image (Optional)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files?.[0];s&&(P(s),C(URL.createObjectURL(s)))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Leave empty if you don't want to upload an image. Teachers without images will show initials instead."}),w&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Uploading image..."}),a.jsx("span",{className:"text-primary-600 font-medium",children:"Processing..."})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-primary-600 h-2 rounded-full animate-pulse"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"New Image Preview:"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("img",{src:A,alt:"New preview",className:"w-full h-32 object-cover rounded-lg shadow-sm border border-gray-200"}),a.jsx("button",{type:"button",onClick:T,className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:a.jsx(h.Z,{className:"w-4 h-4"})})]})]}),v?.imageUrl&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Image:"}),a.jsx("img",{src:`${(0,g.Jn)(v.imageUrl,!0)}?t=${Date.now()}`,alt:"Current",className:"w-full h-32 object-cover rounded-lg shadow-sm border border-gray-200"},`current-${v.id}-${Date.now()}-${Math.random()}`)]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-100",children:[a.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-semibold transition-colors",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-semibold transition-colors flex items-center space-x-2",children:[a.jsx(p.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[v?"Update":"Add"," Teacher"]})]})]})]})]})})]})}},3733:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(9224).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3083:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,t(6843).createProxy)(String.raw`E:\my project\my project\hims website\hims frontend\app\admin\teachers\page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[429,69,762,85],()=>t(4416));module.exports=a})();